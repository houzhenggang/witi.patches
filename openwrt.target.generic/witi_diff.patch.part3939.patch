--- openwrt.bb/openwrt/target/linux/generic/patches-3.10/551-ubifs-fix-default-compression-selection.patch	2015-08-15 05:48:44.045131037 +0200
+++ witi-openwrt/target/linux/generic/patches-3.10/551-ubifs-fix-default-compression-selection.patch	1970-01-01 01:00:00.000000000 +0100
@@ -1,29 +0,0 @@
---- a/fs/ubifs/sb.c
-+++ b/fs/ubifs/sb.c
-@@ -63,6 +63,17 @@
- /* Default time granularity in nanoseconds */
- #define DEFAULT_TIME_GRAN 1000000000
- 
-+static int get_default_compressor(void)
-+{
-+	if (ubifs_compr_present(UBIFS_COMPR_LZO))
-+		return UBIFS_COMPR_LZO;
-+
-+	if (ubifs_compr_present(UBIFS_COMPR_ZLIB))
-+		return UBIFS_COMPR_ZLIB;
-+
-+	return UBIFS_COMPR_NONE;
-+}
-+
- /**
-  * create_default_filesystem - format empty UBI volume.
-  * @c: UBIFS file-system description object
-@@ -183,7 +194,7 @@ static int create_default_filesystem(str
- 	if (c->mount_opts.override_compr)
- 		sup->default_compr = cpu_to_le16(c->mount_opts.compr_type);
- 	else
--		sup->default_compr = cpu_to_le16(UBIFS_COMPR_LZO);
-+		sup->default_compr = cpu_to_le16(get_default_compressor());
- 
- 	generate_random_uuid(sup->uuid);
- 
